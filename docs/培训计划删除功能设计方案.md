# åŸ¹è®­è®¡åˆ’åˆ é™¤åŠŸèƒ½è®¾è®¡æ–¹æ¡ˆ

**è®¾è®¡æ—¥æœŸ**: 2025-11-09  
**ä¼˜å…ˆçº§**: ğŸ”´ é«˜  
**çŠ¶æ€**: ğŸ“ è®¾è®¡é˜¶æ®µ  

---

## ğŸ“‹ éœ€æ±‚åˆ†æ

### ç”¨æˆ·éœ€æ±‚
"åŸ¹è®­è®¡åˆ’ä¸­æ²¡æœ‰åˆ é™¤çš„åŠŸèƒ½ï¼Œä½ è¦æ€è€ƒå¢åŠ è¿™ä¸ªåŠŸèƒ½ï¼ŒåŒ…æ‹¬åˆ é™¤è¯¾ç¨‹åï¼ŒåŸæ¥çš„è®°å½•æ˜¯å¦ä¹Ÿæ¸…é™¤ï¼Ÿ"

### æ ¸å¿ƒé—®é¢˜
1. **åˆ é™¤èŒƒå›´**ï¼šåˆ é™¤åŸ¹è®­åœºæ¬¡æ—¶ï¼Œæ˜¯å¦åŒæ—¶åˆ é™¤å‚è®­è®°å½•ï¼Ÿ
2. **ä¸šç»©å½±å“**ï¼šåˆ é™¤å‚è®­è®°å½•ä¼šå½±å“å·²ç»Ÿè®¡çš„ä¸šç»©æ•°æ®
3. **æ•°æ®ä¸€è‡´æ€§**ï¼šå¦‚ä½•ä¿è¯æ•°æ®åº“å¼•ç”¨å®Œæ•´æ€§
4. **æƒé™æ§åˆ¶**ï¼šè°æœ‰æƒé™åˆ é™¤åŸ¹è®­åœºæ¬¡

---

## ğŸ” æ•°æ®åº“å…³ç³»åˆ†æ

### è¡¨å…³ç³»
```
training_sessions (åŸ¹è®­åœºæ¬¡)
    â†“ å¤–é”®å…³è” (training_session_id)
training_participants (å‚è®­è®°å½•)
    â†“ å…³è”
customers (å®¢æˆ·)
user_profiles (ä¸šåŠ¡å‘˜)

ä¾èµ–å…³ç³»ï¼š
- training_participants.training_session_id â†’ training_sessions.id
- training_participants.customer_id â†’ customers.id (å¯é€‰)
- training_participants.salesperson_name â†’ user_profiles.name (æ–‡æœ¬å…³è”)
```

### å½±å“èŒƒå›´
```
åˆ é™¤ training_sessions ä¼šå½±å“ï¼š
1. training_participants è¡¨ï¼ˆå¤–é”®çº¦æŸï¼‰
2. ä¸šç»©ç»Ÿè®¡ï¼ˆå·²æˆäº¤çš„å‚è®­è®°å½•ï¼‰
3. æœˆåº¦/å­£åº¦/å¹´åº¦ä¸šç»©æŠ¥è¡¨
4. é”€å”®ä¸šç»©è¿½è¸ª
5. è¯¾ç¨‹é”€å”®æ˜ç»†
```

---

## ğŸ’¡ åˆ é™¤ç­–ç•¥è®¾è®¡

### æ–¹æ¡ˆ1ï¼šçº§è”åˆ é™¤ï¼ˆç‰©ç†åˆ é™¤ï¼‰âš ï¸ ä¸æ¨è

**æ“ä½œ**ï¼šåˆ é™¤åŸ¹è®­åœºæ¬¡æ—¶ï¼ŒåŒæ—¶ç‰©ç†åˆ é™¤æ‰€æœ‰å‚è®­è®°å½•

**SQLå®ç°**ï¼š
```sql
-- åˆ é™¤å‚è®­è®°å½•
DELETE FROM training_participants 
WHERE training_session_id = ?;

-- åˆ é™¤åŸ¹è®­åœºæ¬¡
DELETE FROM training_sessions 
WHERE id = ?;
```

**ä¼˜ç‚¹**ï¼š
- âœ… æ•°æ®åº“å¹²å‡€ï¼Œæ— å†—ä½™æ•°æ®
- âœ… å®ç°ç®€å•

**ç¼ºç‚¹**ï¼š
- âŒ **ä¸šç»©æ•°æ®ä¸¢å¤±**ï¼ˆå·²æˆäº¤çš„è®°å½•è¢«åˆ é™¤ï¼‰
- âŒ **å†å²æ•°æ®ä¸å¯è¿½æº¯**
- âŒ **ä¸šç»©ç»Ÿè®¡é”™è¯¯**ï¼ˆæœˆåº¦/å¹´åº¦ä¸šç»©å‡å°‘ï¼‰
- âŒ **å®¡è®¡å›°éš¾**ï¼ˆæ— æ³•æŸ¥çœ‹åˆ é™¤è®°å½•ï¼‰
- âŒ **æ— æ³•æ¢å¤**

**é€‚ç”¨åœºæ™¯**ï¼š
- æµ‹è¯•æ•°æ®æ¸…ç†
- é”™è¯¯åˆ›å»ºçš„åŸ¹è®­ï¼ˆæœªæ·»åŠ å‚è®­äººï¼‰

---

### æ–¹æ¡ˆ2ï¼šè½¯åˆ é™¤ï¼ˆé€»è¾‘åˆ é™¤ï¼‰âœ… æ¨è

**æ“ä½œ**ï¼šæ ‡è®°åŸ¹è®­ä¸ºå·²åˆ é™¤ï¼Œä¿ç•™æ‰€æœ‰å‚è®­è®°å½•

**æ•°æ®åº“å˜æ›´**ï¼š
```sql
-- 1. æ·»åŠ è½¯åˆ é™¤å­—æ®µ
ALTER TABLE training_sessions 
ADD COLUMN deleted_at TIMESTAMP NULL;

ALTER TABLE training_participants
ADD COLUMN deleted_at TIMESTAMP NULL;

-- 2. åˆ é™¤æ“ä½œï¼ˆæ ‡è®°ï¼‰
UPDATE training_sessions 
SET deleted_at = NOW() 
WHERE id = ?;

-- 3. æŸ¥è¯¢æ—¶è¿‡æ»¤å·²åˆ é™¤æ•°æ®
SELECT * FROM training_sessions 
WHERE deleted_at IS NULL;
```

**ä¼˜ç‚¹**ï¼š
- âœ… **ä¿ç•™ä¸šç»©æ•°æ®**ï¼ˆå†å²è®°å½•ä¸ä¸¢å¤±ï¼‰
- âœ… **å¯æ¢å¤**ï¼ˆè¯¯åˆ å¯ä»¥è¿˜åŸï¼‰
- âœ… **å®¡è®¡å‹å¥½**ï¼ˆä¿ç•™åˆ é™¤æ—¶é—´ï¼‰
- âœ… **ä¸šç»©ç»Ÿè®¡æ­£ç¡®**ï¼ˆä¸å½±å“å·²æˆäº¤è®°å½•ï¼‰
- âœ… **æ•°æ®è¿½æº¯**ï¼ˆå¯æŸ¥çœ‹å†å²ï¼‰

**ç¼ºç‚¹**ï¼š
- âš ï¸ æŸ¥è¯¢éœ€è¦æ·»åŠ è¿‡æ»¤æ¡ä»¶
- âš ï¸ æ•°æ®åº“ä¼šä¿ç•™åˆ é™¤è®°å½•

**å®ç°ç»†èŠ‚**ï¼š
```typescript
// å‰ç«¯è¿‡æ»¤
const activeSessions = allSessions.filter(s => !s.deleted_at);

// åç«¯æŸ¥è¯¢
const { data } = await supabase
  .from('training_sessions')
  .select('*')
  .is('deleted_at', null);
```

---

### æ–¹æ¡ˆ3ï¼šçŠ¶æ€æ ‡è®°ï¼ˆcancelledï¼‰âœ… æ¨èï¼ˆç®€åŒ–ç‰ˆï¼‰

**æ“ä½œ**ï¼šå°†åŸ¹è®­çŠ¶æ€æ”¹ä¸º"å·²å–æ¶ˆ"ï¼Œä¿ç•™æ‰€æœ‰æ•°æ®

**å®ç°**ï¼š
```sql
-- æ›´æ–°çŠ¶æ€
UPDATE training_sessions 
SET status = 'cancelled',
    updated_at = NOW()
WHERE id = ?;
```

**ä¼˜ç‚¹**ï¼š
- âœ… **æ— éœ€ä¿®æ”¹æ•°æ®åº“ç»“æ„**ï¼ˆä½¿ç”¨ç°æœ‰statuså­—æ®µï¼‰
- âœ… **ä¿ç•™æ‰€æœ‰æ•°æ®**
- âœ… **ä¸šç»©ä¸å—å½±å“**
- âœ… **å®ç°æœ€ç®€å•**
- âœ… **å¯æ¢å¤**ï¼ˆæ”¹å›activeçŠ¶æ€ï¼‰

**ç¼ºç‚¹**ï¼š
- âš ï¸ "å·²å–æ¶ˆ"å’Œ"å·²åˆ é™¤"æ¦‚å¿µä¸åŒ
- âš ï¸ éœ€è¦UIæ˜¾ç¤ºåŒºåˆ†

---

## ğŸ¯ æ¨èæ–¹æ¡ˆ

### é˜¶æ®µ1ï¼šå¿«é€Ÿå®æ–½ï¼ˆä½¿ç”¨æ–¹æ¡ˆ3ï¼‰âœ…

**ç‰¹ç‚¹**ï¼š
- ä½¿ç”¨ç°æœ‰`status`å­—æ®µ
- å°†åŸ¹è®­æ ‡è®°ä¸º`cancelled`
- æ— éœ€æ•°æ®åº“è¿ç§»
- ä¿ç•™æ‰€æœ‰å‚è®­è®°å½•

**å®ç°æ­¥éª¤**ï¼š
1. æ·»åŠ "åˆ é™¤"æŒ‰é’®ï¼ˆä»…adminï¼‰
2. ç¡®è®¤å¯¹è¯æ¡†æç¤º
3. æ›´æ–°statusä¸º`cancelled`
4. åˆ·æ–°åˆ—è¡¨ï¼ˆè¿‡æ»¤å·²å–æ¶ˆï¼‰

**åˆ é™¤ç¡®è®¤æç¤º**ï¼š
```
ç¡®å®šè¦åˆ é™¤è¿™ä¸ªåŸ¹è®­å—ï¼Ÿ

åŸ¹è®­åç§°ï¼šAIè®¤è¯åŸ¹è®­ç­
åŸ¹è®­æ—¥æœŸï¼š2025-11-15
å‚è®­äººæ•°ï¼š10äºº

âš ï¸ åˆ é™¤åï¼š
- åŸ¹è®­å°†æ ‡è®°ä¸º"å·²å–æ¶ˆ"
- å·²æœ‰çš„å‚è®­è®°å½•å°†ä¿ç•™
- ä¸å½±å“å·²ç»Ÿè®¡çš„ä¸šç»©æ•°æ®
- åŸ¹è®­ä¸ä¼šåœ¨åˆ—è¡¨ä¸­æ˜¾ç¤º

æ­¤æ“ä½œå¯ä»¥æ¢å¤
```

---

### é˜¶æ®µ2ï¼šå®Œæ•´æ–¹æ¡ˆï¼ˆä½¿ç”¨æ–¹æ¡ˆ2ï¼‰ğŸ”„ æœªæ¥ä¼˜åŒ–

**ç‰¹ç‚¹**ï¼š
- æ·»åŠ `deleted_at`å­—æ®µ
- çœŸæ­£çš„è½¯åˆ é™¤
- æ›´æ¸…æ™°çš„è¯­ä¹‰

**æ•°æ®åº“è¿ç§»**ï¼š
```sql
-- scripts/migrations/add-soft-delete-to-training-sessions.sql
ALTER TABLE training_sessions 
ADD COLUMN IF NOT EXISTS deleted_at TIMESTAMP NULL;

CREATE INDEX IF NOT EXISTS idx_training_sessions_deleted_at 
ON training_sessions(deleted_at);
```

**æŸ¥è¯¢ä¼˜åŒ–**ï¼š
```typescript
// åŸºç¡€æŸ¥è¯¢
.is('deleted_at', null)

// åŒ…å«å·²åˆ é™¤ï¼ˆæ¢å¤åŠŸèƒ½ï¼‰
.order('deleted_at', { ascending: true })
```

---

## ğŸ” æƒé™æ§åˆ¶

### åˆ é™¤æƒé™
```typescript
// åªæœ‰adminå¯ä»¥åˆ é™¤
if (user?.role === 'admin') {
  // æ˜¾ç¤ºåˆ é™¤æŒ‰é’®
}
```

### åˆ é™¤é™åˆ¶
```typescript
// æ£€æŸ¥æ˜¯å¦æœ‰å‚è®­äººå‘˜
if (session.participants > 0) {
  // è­¦å‘Šæç¤ºï¼šå·²æœ‰XäººæŠ¥å
  // ç¡®è®¤æ˜¯å¦ç»§ç»­
}

// æ£€æŸ¥åŸ¹è®­çŠ¶æ€
if (session.status === 'ongoing' || session.status === 'completed') {
  // è­¦å‘Šï¼šåŸ¹è®­å·²å¼€å§‹æˆ–å·²å®Œæˆ
  // ç¡®è®¤æ˜¯å¦ç»§ç»­
}
```

---

## ğŸ¨ UIè®¾è®¡

### åˆ é™¤æŒ‰é’®ä½ç½®
```
åŸ¹è®­åˆ—è¡¨å¡ç‰‡ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AIè®¤è¯åŸ¹è®­ç­     [å³å°†å¼€å§‹]          â”‚
â”‚ 2025-11-15 | 10äºº                   â”‚
â”‚                                     â”‚
â”‚ [ğŸ‘ï¸æŸ¥çœ‹] [âœï¸ç¼–è¾‘] [ğŸ‘¥æ·»åŠ ] [ğŸ—‘ï¸åˆ é™¤] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç¡®è®¤å¯¹è¯æ¡†
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          âš ï¸ ç¡®è®¤åˆ é™¤åŸ¹è®­ï¼Ÿ            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                       â”‚
â”‚  åŸ¹è®­åç§°ï¼šAIè®¤è¯åŸ¹è®­ç­                â”‚
â”‚  åŸ¹è®­æ—¥æœŸï¼š2025-11-15                 â”‚
â”‚  å‚è®­äººæ•°ï¼š10äºº                       â”‚
â”‚  ä¸šç»©é‡‘é¢ï¼šÂ¥50,000                    â”‚
â”‚                                       â”‚
â”‚  âš ï¸ åˆ é™¤å½±å“ï¼š                        â”‚
â”‚  â€¢ åŸ¹è®­å°†æ ‡è®°ä¸º"å·²å–æ¶ˆ"                â”‚
â”‚  â€¢ å·²æœ‰çš„10æ¡å‚è®­è®°å½•å°†ä¿ç•™            â”‚
â”‚  â€¢ ä¸å½±å“å·²ç»Ÿè®¡çš„Â¥50,000ä¸šç»©          â”‚
â”‚  â€¢ æ­¤æ“ä½œå¯ä»¥æ¢å¤                     â”‚
â”‚                                       â”‚
â”‚      [å–æ¶ˆ]         [ç¡®è®¤åˆ é™¤]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ æŠ€æœ¯å®ç°

### åç«¯æœåŠ¡
```typescript
// src/lib/services/trainingSessionService.ts

class TrainingSessionService {
  // åˆ é™¤åŸ¹è®­åœºæ¬¡ï¼ˆè½¯åˆ é™¤ï¼‰
  async deleteSession(sessionId: number): Promise<void> {
    // æ–¹æ¡ˆ3ï¼šæ ‡è®°ä¸ºå·²å–æ¶ˆ
    const { error } = await supabase
      .from('training_sessions')
      .update({ 
        status: 'cancelled',
        updated_at: new Date().toISOString()
      })
      .eq('id', sessionId);
    
    if (error) throw error;
  }
  
  // è·å–åŸ¹è®­å‚è®­äººæ•°
  async getParticipantCount(sessionId: number): Promise<number> {
    const { count } = await supabase
      .from('training_participants')
      .select('*', { count: 'exact', head: true })
      .eq('training_session_id', sessionId);
    
    return count || 0;
  }
  
  // æ¢å¤åŸ¹è®­åœºæ¬¡
  async restoreSession(sessionId: number): Promise<void> {
    const { error } = await supabase
      .from('training_sessions')
      .update({ 
        status: 'upcoming',  // æˆ–æ ¹æ®æ—¥æœŸè‡ªåŠ¨è®¡ç®—
        updated_at: new Date().toISOString()
      })
      .eq('id', sessionId);
    
    if (error) throw error;
  }
}
```

### å‰ç«¯å®ç°
```typescript
// src/pages/TrainingManagement.tsx

// 1. æ·»åŠ åˆ é™¤çŠ¶æ€
const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);
const [sessionToDelete, setSessionToDelete] = useState<TrainingSessionFrontend | null>(null);
const [participantCount, setParticipantCount] = useState(0);

// 2. æ‰“å¼€åˆ é™¤ç¡®è®¤
const handleDeleteClick = async (session: TrainingSessionFrontend) => {
  setSessionToDelete(session);
  
  // è·å–å‚è®­äººæ•°
  const count = await trainingSessionService.getParticipantCount(session.id);
  setParticipantCount(count);
  
  setIsDeleteDialogOpen(true);
};

// 3. ç¡®è®¤åˆ é™¤
const handleConfirmDelete = async () => {
  if (!sessionToDelete) return;
  
  try {
    await trainingSessionService.deleteSession(sessionToDelete.id);
    toast.success('åŸ¹è®­å·²åˆ é™¤');
    loadData(); // åˆ·æ–°åˆ—è¡¨
    setIsDeleteDialogOpen(false);
  } catch (error) {
    toast.error('åˆ é™¤å¤±è´¥');
  }
};

// 4. è¿‡æ»¤åˆ—è¡¨ï¼ˆä¸æ˜¾ç¤ºå·²å–æ¶ˆçš„ï¼‰
const filteredSessions = trainingSessions.filter(s => 
  s.status !== 'cancelled' && 
  // å…¶ä»–ç­›é€‰æ¡ä»¶...
);
```

### åˆ é™¤æŒ‰é’®
```tsx
{user?.role === 'admin' && (
  <button
    onClick={() => handleDeleteClick(session)}
    className="p-2 text-red-600 hover:bg-red-50 rounded-lg"
    title="åˆ é™¤åŸ¹è®­"
  >
    <Trash2 size={18} />
  </button>
)}
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. ä¸šç»©æ•°æ®ä¿æŠ¤
```
âŒ é”™è¯¯åšæ³•ï¼š
DELETE FROM training_participants  // ä¸šç»©æ•°æ®ä¸¢å¤±

âœ… æ­£ç¡®åšæ³•ï¼š
UPDATE training_sessions SET status = 'cancelled'  // ä¿ç•™ä¸šç»©
```

### 2. åˆ é™¤å‰æ£€æŸ¥
```typescript
// æ£€æŸ¥å‚è®­äººæ•°
if (participantCount > 0) {
  // æ˜¾ç¤ºè­¦å‘Šï¼šå·²æœ‰XäººæŠ¥åï¼Œç¡®è®¤åˆ é™¤ï¼Ÿ
}

// æ£€æŸ¥åŸ¹è®­æ—¥æœŸ
const today = new Date();
const trainingDate = new Date(session.date);
if (trainingDate < today) {
  // è­¦å‘Šï¼šåŸ¹è®­å·²è¿‡æœŸï¼Œä»è¦åˆ é™¤å—ï¼Ÿ
}
```

### 3. æƒé™éªŒè¯
```typescript
// åç«¯RLSç­–ç•¥ï¼ˆSupabaseï¼‰
CREATE POLICY "Only admins can delete training_sessions"
ON training_sessions
FOR UPDATE
USING (auth.uid() IN (
  SELECT id FROM user_profiles WHERE role = 'admin'
));
```

---

## ğŸ“Š å½±å“åˆ†æ

### åˆ é™¤å½±å“çš„åŠŸèƒ½æ¨¡å—

| æ¨¡å— | å½±å“ | å¤„ç†æ–¹æ¡ˆ |
|------|------|----------|
| **åŸ¹è®­è®¡åˆ’** | ä¸æ˜¾ç¤ºå·²åˆ é™¤åŸ¹è®­ | è¿‡æ»¤`status='cancelled'` |
| **é”€å”®è¿½è¸ª** | ä¸šç»©æ•°æ®ä¿ç•™ | ä¿ç•™å‚è®­è®°å½• âœ… |
| **è¯¾ç¨‹é”€å”®æ˜ç»†** | ç»Ÿè®¡ä¸å—å½±å“ | ä¿ç•™å‚è®­è®°å½• âœ… |
| **æœˆåº¦ä¸šç»©** | ä¸å—å½±å“ | åŸºäºå‚è®­è®°å½•ç»Ÿè®¡ âœ… |
| **ä¸šåŠ¡å‘˜æ’è¡Œ** | ä¸å—å½±å“ | åŸºäºå‚è®­è®°å½•ç»Ÿè®¡ âœ… |
| **åŸ¹è®­è¯¦æƒ…** | å¯èƒ½éœ€è¦æ˜¾ç¤º"å·²å–æ¶ˆ" | çŠ¶æ€æ˜¾ç¤ºä¼˜åŒ– |

---

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹

### æµ‹è¯•1ï¼šåˆ é™¤ç©ºåŸ¹è®­
```
å‰ç½®æ¡ä»¶ï¼šåˆ›å»ºä¸€ä¸ªæ²¡æœ‰å‚è®­äººçš„åŸ¹è®­
æ“ä½œï¼šç‚¹å‡»åˆ é™¤
é¢„æœŸï¼š
- âœ… æˆåŠŸåˆ é™¤
- âœ… åˆ—è¡¨ä¸­ä¸å†æ˜¾ç¤º
- âœ… çŠ¶æ€å˜ä¸ºcancelled
```

### æµ‹è¯•2ï¼šåˆ é™¤æœ‰å‚è®­äººçš„åŸ¹è®­
```
å‰ç½®æ¡ä»¶ï¼šåŸ¹è®­æœ‰10ä¸ªå‚è®­äºº
æ“ä½œï¼šç‚¹å‡»åˆ é™¤
é¢„æœŸï¼š
- âœ… æ˜¾ç¤ºè­¦å‘Šï¼šå·²æœ‰10äººæŠ¥å
- âœ… ç¡®è®¤åæˆåŠŸåˆ é™¤
- âœ… å‚è®­è®°å½•ä¿ç•™
- âœ… ä¸šç»©æ•°æ®ä¸å˜
```

### æµ‹è¯•3ï¼šåˆ é™¤å·²å®Œæˆçš„åŸ¹è®­
```
å‰ç½®æ¡ä»¶ï¼šåŸ¹è®­çŠ¶æ€ä¸ºcompleted
æ“ä½œï¼šç‚¹å‡»åˆ é™¤
é¢„æœŸï¼š
- âœ… æ˜¾ç¤ºè­¦å‘Šï¼šåŸ¹è®­å·²å®Œæˆ
- âœ… ç¡®è®¤åå¯ä»¥åˆ é™¤
- âœ… æ‰€æœ‰æ•°æ®ä¿ç•™
```

### æµ‹è¯•4ï¼šæƒé™æ£€æŸ¥
```
å‰ç½®æ¡ä»¶ï¼šä¸šåŠ¡å‘˜è§’è‰²ç™»å½•
æ“ä½œï¼šæŸ¥çœ‹åŸ¹è®­åˆ—è¡¨
é¢„æœŸï¼š
- âœ… ä¸æ˜¾ç¤ºåˆ é™¤æŒ‰é’®
- âœ… æ— æ³•è°ƒç”¨åˆ é™¤API
```

### æµ‹è¯•5ï¼šä¸šç»©ç»Ÿè®¡éªŒè¯
```
å‰ç½®æ¡ä»¶ï¼š
- åŸ¹è®­æœ‰5äººï¼Œä¸šç»©Â¥25,000
- åˆ é™¤å‰ç»Ÿè®¡ï¼šÂ¥25,000
æ“ä½œï¼šåˆ é™¤åŸ¹è®­
éªŒè¯ï¼š
- âœ… é”€å”®è¿½è¸ªé¡µé¢ï¼šä¸šç»©ä»ä¸ºÂ¥25,000
- âœ… æœˆåº¦ä¸šç»©ï¼šä¸å˜
- âœ… ä¸šåŠ¡å‘˜æ’è¡Œï¼šä¸å˜
```

---

## ğŸ“ å®æ–½è®¡åˆ’

### Phase 1ï¼šå¿«é€Ÿå®æ–½ï¼ˆ1-2å°æ—¶ï¼‰âœ… æ¨è
1. âœ… æ·»åŠ åˆ é™¤æŒ‰é’®ï¼ˆadmin onlyï¼‰
2. âœ… å®ç°åˆ é™¤ç¡®è®¤å¯¹è¯æ¡†
3. âœ… å®ç°åˆ é™¤æœåŠ¡ï¼ˆstatus='cancelled'ï¼‰
4. âœ… è¿‡æ»¤åˆ—è¡¨ï¼ˆéšè—å·²å–æ¶ˆï¼‰
5. âœ… æµ‹è¯•åŸºæœ¬åŠŸèƒ½

### Phase 2ï¼šå®Œå–„åŠŸèƒ½ï¼ˆ2-3å°æ—¶ï¼‰ğŸ”„ å¯é€‰
1. æ·»åŠ å‚è®­äººæ•°æ˜¾ç¤º
2. æ·»åŠ ä¸šç»©é‡‘é¢æ˜¾ç¤º
3. ä¼˜åŒ–ç¡®è®¤æç¤º
4. æ·»åŠ åˆ é™¤å‰æ£€æŸ¥
5. æ·»åŠ æƒé™éªŒè¯

### Phase 3ï¼šé«˜çº§åŠŸèƒ½ï¼ˆæœªæ¥ï¼‰ğŸ“… å¾…å®š
1. æ•°æ®åº“è¿ç§»åˆ°è½¯åˆ é™¤
2. å®ç°æ¢å¤åŠŸèƒ½
3. åˆ é™¤å†å²è®°å½•
4. æ‰¹é‡åˆ é™¤
5. åˆ é™¤å®¡è®¡æ—¥å¿—

---

## ğŸ¯ æœ€ç»ˆæ¨è

### ç«‹å³å®æ–½ï¼šæ–¹æ¡ˆ3ï¼ˆçŠ¶æ€æ ‡è®°ï¼‰

**åŸå› **ï¼š
1. âœ… **æœ€ç®€å•** - æ— éœ€ä¿®æ”¹æ•°æ®åº“
2. âœ… **æœ€å®‰å…¨** - ä¿ç•™æ‰€æœ‰æ•°æ®
3. âœ… **å¯æ¢å¤** - æ”¹çŠ¶æ€å³å¯
4. âœ… **å¿«é€Ÿ** - 1-2å°æ—¶å®Œæˆ

**å®æ–½æ­¥éª¤**ï¼š
```
1. æ·»åŠ Trash2å›¾æ ‡å¯¼å…¥
2. æ·»åŠ åˆ é™¤æŒ‰é’®ï¼ˆä»…adminå¯è§ï¼‰
3. å¤ç”¨ConfirmDialogç»„ä»¶
4. å®ç°åˆ é™¤å¤„ç†å‡½æ•°
5. æ›´æ–°åˆ—è¡¨è¿‡æ»¤é€»è¾‘
6. æµ‹è¯•åŠŸèƒ½
```

**åç»­ä¼˜åŒ–**ï¼š
- æ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µå†³å®šæ˜¯å¦éœ€è¦è½¯åˆ é™¤
- è€ƒè™‘æ·»åŠ æ¢å¤åŠŸèƒ½
- ä¼˜åŒ–åˆ é™¤æç¤ºä¿¡æ¯

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `docs/æ•°æ®åº“è¡¨ç»“æ„ä¸å­—æ®µè¯´æ˜.md` - è¡¨ç»“æ„è¯´æ˜
- `docs/è¯¾ç¨‹ç®¡ç†åŠŸèƒ½éƒ¨ç½²å®ŒæˆæŠ¥å‘Š.md` - è¯¾ç¨‹åˆ é™¤åŠŸèƒ½å‚è€ƒ
- `scripts/migrations/` - æ•°æ®åº“è¿ç§»è„šæœ¬ï¼ˆå¦‚éœ€ï¼‰

---

**è®¾è®¡æ—¶é—´**: 2025-11-09 20:15  
**çŠ¶æ€**: ğŸ“ è®¾è®¡å®Œæˆï¼Œç­‰å¾…å®æ–½  
**ä¸‹ä¸€æ­¥**: å®æ–½Phase 1 - å¿«é€Ÿå®æ–½æ–¹æ¡ˆ

**å…³é”®å†³ç­–**ï¼šä½¿ç”¨status='cancelled'æ ‡è®°åˆ é™¤ï¼Œä¿ç•™æ‰€æœ‰å‚è®­è®°å½•å’Œä¸šç»©æ•°æ® âœ…
