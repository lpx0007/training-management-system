# ğŸ“‹ éƒ¨ç½²æ–‡ä»¶å¯¹æ¯”è¯´æ˜

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜ Netlify å’Œ EdgeOne éƒ¨ç½²æ‰€éœ€çš„æ–‡ä»¶å’Œé…ç½®ã€‚

---

## âœ… ç®€çŸ­å›ç­”

**æ˜¯çš„ï¼Œéƒ¨ç½²æ–‡ä»¶å®Œå…¨ä¸€æ ·ï¼** 

ä¸¤ä¸ªå¹³å°ä½¿ç”¨ï¼š
- âœ… ç›¸åŒçš„æºä»£ç 
- âœ… ç›¸åŒçš„æ„å»ºå‘½ä»¤
- âœ… ç›¸åŒçš„è¾“å‡ºç›®å½•
- âœ… ç›¸åŒçš„ç¯å¢ƒå˜é‡

**å”¯ä¸€çš„åŒºåˆ«**ï¼š`netlify.toml` æ–‡ä»¶åªå¯¹ Netlify æœ‰æ•ˆï¼ŒEdgeOne ä¼šå¿½ç•¥å®ƒã€‚

---

## ğŸ“Š è¯¦ç»†å¯¹æ¯”

### æ ¸å¿ƒæ„å»ºé…ç½®

| é…ç½®é¡¹ | Netlify | EdgeOne | æ˜¯å¦ç›¸åŒ |
|--------|---------|---------|----------|
| **æ„å»ºå‘½ä»¤** | `pnpm build` | `pnpm build` | âœ… å®Œå…¨ç›¸åŒ |
| **è¾“å‡ºç›®å½•** | `dist/static` | `dist/static` | âœ… å®Œå…¨ç›¸åŒ |
| **Node ç‰ˆæœ¬** | 18 | 18 | âœ… å®Œå…¨ç›¸åŒ |
| **åŒ…ç®¡ç†å™¨** | pnpm | pnpm | âœ… å®Œå…¨ç›¸åŒ |
| **ç¯å¢ƒå˜é‡** | VITE_* | VITE_* | âœ… å®Œå…¨ç›¸åŒ |

### æºä»£ç æ–‡ä»¶

æ‰€æœ‰æºä»£ç æ–‡ä»¶ä¸¤ä¸ªå¹³å°å®Œå…¨å…±äº«ï¼š

```
âœ… src/                    # æ‰€æœ‰æºä»£ç 
âœ… public/                 # é™æ€èµ„æº
âœ… index.html              # HTML å…¥å£
âœ… package.json            # ä¾èµ–é…ç½®
âœ… vite.config.ts          # Vite é…ç½®
âœ… tsconfig.json           # TypeScript é…ç½®
âœ… tailwind.config.js      # Tailwind é…ç½®
âœ… postcss.config.js       # PostCSS é…ç½®
```

### é…ç½®æ–‡ä»¶å¯¹æ¯”

#### 1. netlify.toml

**ä½ç½®**: é¡¹ç›®æ ¹ç›®å½•  
**ä½œç”¨**: Netlify ä¸“ç”¨é…ç½®æ–‡ä»¶  
**EdgeOne æ˜¯å¦éœ€è¦**: âŒ ä¸éœ€è¦ï¼ˆEdgeOne ä¼šå¿½ç•¥ï¼‰

```toml
# netlify.toml - åªå¯¹ Netlify æœ‰æ•ˆ
[build]
  command = "pnpm build"
  publish = "dist/static"
  
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
```

**EdgeOne å¤„ç†æ–¹å¼**ï¼š
- EdgeOne ä¸è¯»å– `netlify.toml`
- åœ¨ EdgeOne æ§åˆ¶å°æ‰‹åŠ¨é…ç½®è¿™äº›è®¾ç½®
- æˆ–è€… EdgeOne ä¼šè‡ªåŠ¨è¯†åˆ« Vite é¡¹ç›®

#### 2. package.json

**ä½ç½®**: é¡¹ç›®æ ¹ç›®å½•  
**ä½œç”¨**: å®šä¹‰æ„å»ºè„šæœ¬å’Œä¾èµ–  
**ä¸¤ä¸ªå¹³å°**: âœ… å®Œå…¨ç›¸åŒ

```json
{
  "scripts": {
    "build": "vite build --outDir dist/static"
  }
}
```

#### 3. vite.config.ts

**ä½ç½®**: é¡¹ç›®æ ¹ç›®å½•  
**ä½œç”¨**: Vite æ„å»ºé…ç½®  
**ä¸¤ä¸ªå¹³å°**: âœ… å®Œå…¨ç›¸åŒ

```typescript
export default defineConfig({
  plugins: [react(), tsconfigPaths()],
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          'excel-libs': ['xlsx', 'papaparse'],
          'pdf-libs': ['jspdf', 'jspdf-autotable']
        }
      }
    }
  }
});
```

#### 4. .env.local

**ä½ç½®**: é¡¹ç›®æ ¹ç›®å½•ï¼ˆä¸æäº¤åˆ° Gitï¼‰  
**ä½œç”¨**: ç¯å¢ƒå˜é‡  
**ä¸¤ä¸ªå¹³å°**: âœ… å˜é‡åç›¸åŒï¼Œå€¼å¯ä»¥ç›¸åŒæˆ–ä¸åŒ

```bash
# ä¸¤ä¸ªå¹³å°éƒ½éœ€è¦é…ç½®è¿™äº›ç¯å¢ƒå˜é‡
VITE_SUPABASE_URL=https://your-project-id.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key-here
```

**é…ç½®ä½ç½®**ï¼š
- **Netlify**: Site settings â†’ Environment variables
- **EdgeOne**: é¡¹ç›®è®¾ç½® â†’ ç¯å¢ƒå˜é‡

---

## ğŸ” å…³é”®å‘ç°

### 1. netlify.toml çš„ä½œç”¨

`netlify.toml` æ–‡ä»¶åŒ…å«çš„é…ç½®ï¼š

#### a) æ„å»ºé…ç½®
```toml
[build]
  command = "pnpm build"
  publish = "dist/static"
```

**EdgeOne ç­‰æ•ˆé…ç½®**ï¼šåœ¨æ§åˆ¶å°æ‰‹åŠ¨è®¾ç½®
- æ„å»ºå‘½ä»¤ï¼š`pnpm build`
- è¾“å‡ºç›®å½•ï¼š`dist/static`

#### b) è·¯ç”±é‡å®šå‘
```toml
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
```

**ä½œç”¨**ï¼šæ”¯æŒ React Router çš„å®¢æˆ·ç«¯è·¯ç”±  
**EdgeOne å¤„ç†**ï¼šEdgeOne ä¼šè‡ªåŠ¨è¯†åˆ« SPA åº”ç”¨å¹¶é…ç½®é‡å®šå‘

#### c) å®‰å…¨å¤´
```toml
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    # ... å…¶ä»–å®‰å…¨å¤´
```

**EdgeOne å¤„ç†**ï¼šEdgeOne æœ‰è‡ªå·±çš„å®‰å…¨å¤´é…ç½®ç•Œé¢

#### d) ç¼“å­˜ç­–ç•¥
```toml
[[headers]]
  for = "/assets/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"
```

**EdgeOne å¤„ç†**ï¼šEdgeOne æœ‰è‡ªå·±çš„ç¼“å­˜é…ç½®

### 2. æ„å»ºäº§ç‰©

ä¸¤ä¸ªå¹³å°çš„æ„å»ºäº§ç‰©å®Œå…¨ç›¸åŒï¼š

```
dist/static/
â”œâ”€â”€ index.html
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ index-[hash].js
â”‚   â”œâ”€â”€ index-[hash].css
â”‚   â””â”€â”€ [å…¶ä»–èµ„æº]
â””â”€â”€ [å…¶ä»–æ–‡ä»¶]
```

---

## ğŸ“ å®é™…éƒ¨ç½²å¯¹æ¯”

### Netlify éƒ¨ç½²æµç¨‹

```bash
# 1. ä»£ç æ¨é€åˆ° GitHub
git push origin main

# 2. Netlify è‡ªåŠ¨æ£€æµ‹åˆ°æ¨é€

# 3. Netlify è¯»å– netlify.toml
#    - æ„å»ºå‘½ä»¤: pnpm build
#    - è¾“å‡ºç›®å½•: dist/static
#    - é‡å®šå‘è§„åˆ™
#    - å®‰å…¨å¤´

# 4. æ‰§è¡Œæ„å»º
pnpm install
pnpm build

# 5. éƒ¨ç½² dist/static ç›®å½•

# 6. åº”ç”¨é…ç½®ï¼ˆé‡å®šå‘ã€å®‰å…¨å¤´ç­‰ï¼‰
```

### EdgeOne éƒ¨ç½²æµç¨‹

```bash
# 1. ä»£ç æ¨é€åˆ° Gitee
git push gitee main

# 2. EdgeOne è‡ªåŠ¨æ£€æµ‹åˆ°æ¨é€

# 3. EdgeOne ä½¿ç”¨æ§åˆ¶å°é…ç½®
#    - æ„å»ºå‘½ä»¤: pnpm build (æ‰‹åŠ¨é…ç½®)
#    - è¾“å‡ºç›®å½•: dist/static (æ‰‹åŠ¨é…ç½®)
#    - æ¡†æ¶: Vite (è‡ªåŠ¨è¯†åˆ«)

# 4. æ‰§è¡Œæ„å»º
pnpm install
pnpm build

# 5. éƒ¨ç½² dist/static ç›®å½•

# 6. åº”ç”¨ EdgeOne çš„é»˜è®¤é…ç½®
```

---

## ğŸ¯ å…³é”®ç»“è®º

### éœ€è¦çš„æ–‡ä»¶ï¼ˆä¸¤ä¸ªå¹³å°ç›¸åŒï¼‰

```
âœ… src/                    # æºä»£ç 
âœ… public/                 # é™æ€èµ„æº
âœ… index.html              # HTML å…¥å£
âœ… package.json            # ä¾èµ–å’Œè„šæœ¬
âœ… pnpm-lock.yaml          # é”å®šæ–‡ä»¶
âœ… vite.config.ts          # Vite é…ç½®
âœ… tsconfig.json           # TS é…ç½®
âœ… tailwind.config.js      # Tailwind é…ç½®
âœ… postcss.config.js       # PostCSS é…ç½®
```

### å¹³å°ç‰¹å®šæ–‡ä»¶

```
ğŸ“„ netlify.toml            # åªå¯¹ Netlify æœ‰æ•ˆ
                           # EdgeOne ä¼šå¿½ç•¥æ­¤æ–‡ä»¶
                           # ä¸å½±å“ EdgeOne éƒ¨ç½²
```

### ä¸éœ€è¦çš„æ–‡ä»¶

```
âŒ edgeone.config.js       # EdgeOne ä¸éœ€è¦é…ç½®æ–‡ä»¶
âŒ vercel.json             # ä¸ä½¿ç”¨ Vercel
âŒ .netlifyignore          # å¯é€‰
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. ä¿ç•™ netlify.toml

**å»ºè®®**ï¼šä¿ç•™ `netlify.toml` æ–‡ä»¶

**åŸå› **ï¼š
- âœ… ä¸å½±å“ EdgeOne éƒ¨ç½²ï¼ˆEdgeOne ä¼šå¿½ç•¥ï¼‰
- âœ… ä¸º Netlify æä¾›å®Œæ•´é…ç½®
- âœ… ä¾¿äºç»´æŠ¤å’Œæ–‡æ¡£åŒ–
- âœ… å…¶ä»–å¼€å‘è€…å¯ä»¥äº†è§£ Netlify é…ç½®

### 2. ç¯å¢ƒå˜é‡ç®¡ç†

**ç­–ç•¥ Aï¼šä½¿ç”¨ç›¸åŒçš„å€¼**ï¼ˆæ¨èï¼‰

```bash
# Netlify å’Œ EdgeOne éƒ½é…ç½®ç›¸åŒçš„å€¼
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key
```

**ä¼˜ç‚¹**ï¼š
- âœ… æ•°æ®ç»Ÿä¸€
- âœ… ç®¡ç†ç®€å•
- âœ… ç”¨æˆ·ä½“éªŒä¸€è‡´

**ç­–ç•¥ Bï¼šä½¿ç”¨ä¸åŒçš„å€¼**

```bash
# Netlifyï¼ˆæµ·å¤–ï¼‰
VITE_SUPABASE_URL=https://project-global.supabase.co

# EdgeOneï¼ˆå›½å†…ï¼‰
VITE_SUPABASE_URL=https://project-cn.supabase.co
```

**ä¼˜ç‚¹**ï¼š
- âœ… ç¯å¢ƒéš”ç¦»
- âœ… å¯ä»¥ç‹¬ç«‹æµ‹è¯•

### 3. é…ç½®åŒæ­¥

è™½ç„¶ `netlify.toml` å¯¹ EdgeOne æ— æ•ˆï¼Œä½†å¯ä»¥å‚è€ƒå®ƒæ¥é…ç½® EdgeOneï¼š

| netlify.toml é…ç½® | EdgeOne æ§åˆ¶å°é…ç½® |
|-------------------|-------------------|
| `command = "pnpm build"` | æ„å»ºå‘½ä»¤ï¼š`pnpm build` |
| `publish = "dist/static"` | è¾“å‡ºç›®å½•ï¼š`dist/static` |
| `NODE_VERSION = "18"` | Node ç‰ˆæœ¬ï¼š18.x |
| é‡å®šå‘è§„åˆ™ | è‡ªåŠ¨è¯†åˆ« SPA |
| å®‰å…¨å¤´ | åœ¨æ§åˆ¶å°é…ç½® |
| ç¼“å­˜ç­–ç•¥ | åœ¨æ§åˆ¶å°é…ç½® |

---

## ğŸ”§ EdgeOne ç‰¹å®šé…ç½®

è™½ç„¶ EdgeOne ä¸éœ€è¦é…ç½®æ–‡ä»¶ï¼Œä½†ä½ å¯ä»¥åœ¨æ§åˆ¶å°é…ç½®ä»¥ä¸‹å†…å®¹ï¼š

### 1. åŸºç¡€é…ç½®

```yaml
æ¡†æ¶é¢„è®¾: Vite
æ„å»ºå‘½ä»¤: pnpm build
è¾“å‡ºç›®å½•: dist/static
Node ç‰ˆæœ¬: 18.x
åŒ…ç®¡ç†å™¨: pnpm
```

### 2. ç¯å¢ƒå˜é‡

```bash
VITE_SUPABASE_URL=your-url
VITE_SUPABASE_ANON_KEY=your-key
```

### 3. è·¯ç”±é…ç½®ï¼ˆå¯é€‰ï¼‰

EdgeOne é€šå¸¸ä¼šè‡ªåŠ¨è¯†åˆ« SPA åº”ç”¨ï¼Œä½†å¦‚æœéœ€è¦æ‰‹åŠ¨é…ç½®ï¼š

```
/* â†’ /index.html (200)
```

### 4. ç¼“å­˜é…ç½®ï¼ˆå¯é€‰ï¼‰

```
/assets/* â†’ ç¼“å­˜ 1 å¹´
/*.html â†’ ä¸ç¼“å­˜
```

---

## ğŸ“‹ éƒ¨ç½²æ£€æŸ¥æ¸…å•

### æ–‡ä»¶æ£€æŸ¥

- [ ] æ‰€æœ‰æºä»£ç æ–‡ä»¶å·²æäº¤
- [ ] `package.json` åŒ…å«æ­£ç¡®çš„æ„å»ºè„šæœ¬
- [ ] `vite.config.ts` é…ç½®æ­£ç¡®
- [ ] `netlify.toml` å­˜åœ¨ï¼ˆä¸º Netlify å‡†å¤‡ï¼‰
- [ ] `.gitignore` æ’é™¤äº† `node_modules` å’Œ `.env.local`

### Netlify é…ç½®æ£€æŸ¥

- [ ] `netlify.toml` é…ç½®æ­£ç¡®
- [ ] ç¯å¢ƒå˜é‡å·²åœ¨æ§åˆ¶å°é…ç½®
- [ ] æ„å»ºå‘½ä»¤ï¼š`pnpm build`
- [ ] è¾“å‡ºç›®å½•ï¼š`dist/static`

### EdgeOne é…ç½®æ£€æŸ¥

- [ ] æ§åˆ¶å°æ„å»ºå‘½ä»¤ï¼š`pnpm build`
- [ ] æ§åˆ¶å°è¾“å‡ºç›®å½•ï¼š`dist/static`
- [ ] ç¯å¢ƒå˜é‡å·²åœ¨æ§åˆ¶å°é…ç½®
- [ ] Node ç‰ˆæœ¬ï¼š18.x
- [ ] åŒ…ç®¡ç†å™¨ï¼špnpm

### æ„å»ºæµ‹è¯•

- [ ] æœ¬åœ°æ„å»ºæˆåŠŸï¼š`pnpm build`
- [ ] æ„å»ºäº§ç‰©åœ¨ `dist/static` ç›®å½•
- [ ] æœ¬åœ°é¢„è§ˆæ­£å¸¸ï¼š`pnpm preview`

---

## ğŸ“ å¸¸è§é—®é¢˜

### Q1: netlify.toml ä¼šå½±å“ EdgeOne å—ï¼Ÿ

**A**: ä¸ä¼šã€‚EdgeOne å®Œå…¨å¿½ç•¥ `netlify.toml` æ–‡ä»¶ã€‚

### Q2: éœ€è¦åˆ›å»º edgeone.config.js å—ï¼Ÿ

**A**: ä¸éœ€è¦ã€‚EdgeOne ä¸ä½¿ç”¨é…ç½®æ–‡ä»¶ï¼Œæ‰€æœ‰é…ç½®åœ¨æ§åˆ¶å°å®Œæˆã€‚

### Q3: ä¸¤ä¸ªå¹³å°çš„æ„å»ºäº§ç‰©ä¸€æ ·å—ï¼Ÿ

**A**: å®Œå…¨ä¸€æ ·ã€‚å› ä¸ºä½¿ç”¨ç›¸åŒçš„æ„å»ºå‘½ä»¤å’Œé…ç½®ã€‚

### Q4: å¯ä»¥åˆ é™¤ netlify.toml å—ï¼Ÿ

**A**: å¯ä»¥ï¼Œä½†ä¸å»ºè®®ã€‚ä¿ç•™å®ƒä¸ä¼šå½±å“ EdgeOneï¼Œä¸”ä¾¿äº Netlify éƒ¨ç½²ã€‚

### Q5: ç¯å¢ƒå˜é‡å¿…é¡»ç›¸åŒå—ï¼Ÿ

**A**: ä¸å¿…é¡»ã€‚å¯ä»¥æ ¹æ®éœ€è¦ä½¿ç”¨ç›¸åŒæˆ–ä¸åŒçš„å€¼ã€‚

### Q6: å¦‚ä½•ç¡®ä¿ä¸¤ä¸ªå¹³å°é…ç½®ä¸€è‡´ï¼Ÿ

**A**: å‚è€ƒ `netlify.toml` çš„é…ç½®ï¼Œåœ¨ EdgeOne æ§åˆ¶å°æ‰‹åŠ¨è®¾ç½®ç›¸åŒçš„å€¼ã€‚

### Q7: æ„å»ºå¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**A**: 
1. æ£€æŸ¥æ„å»ºå‘½ä»¤æ˜¯å¦æ­£ç¡®
2. æ£€æŸ¥è¾“å‡ºç›®å½•æ˜¯å¦æ­£ç¡®
3. æ£€æŸ¥ Node ç‰ˆæœ¬æ˜¯å¦åŒ¹é…
4. æŸ¥çœ‹æ„å»ºæ—¥å¿—è·å–è¯¦ç»†é”™è¯¯

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [EdgeOne éƒ¨ç½²æŒ‡å—](./EDGEONE_DEPLOYMENT.md)
- [å¤šå¹³å°éƒ¨ç½²å¯¹æ¯”](./DEPLOYMENT_COMPARISON.md)
- [é¡¹ç›®å®Œæ•´æ–‡æ¡£](./PROJECT_DOCUMENTATION.md)

---

## ğŸ¯ å¿«é€Ÿæ€»ç»“

### âœ… ç›¸åŒçš„éƒ¨åˆ†ï¼ˆ99%ï¼‰

- æ‰€æœ‰æºä»£ç æ–‡ä»¶
- æ‰€æœ‰é…ç½®æ–‡ä»¶ï¼ˆé™¤äº† netlify.tomlï¼‰
- æ„å»ºå‘½ä»¤å’Œè¾“å‡ºç›®å½•
- ç¯å¢ƒå˜é‡åç§°
- æ„å»ºäº§ç‰©

### âš ï¸ ä¸åŒçš„éƒ¨åˆ†ï¼ˆ1%ï¼‰

- `netlify.toml` åªå¯¹ Netlify æœ‰æ•ˆ
- EdgeOne åœ¨æ§åˆ¶å°é…ç½®ï¼Œä¸ä½¿ç”¨é…ç½®æ–‡ä»¶
- ç¯å¢ƒå˜é‡çš„å€¼å¯ä»¥é€‰æ‹©ç›¸åŒæˆ–ä¸åŒ

### ğŸ’¡ ç»“è®º

**ä½ å¯ä»¥ä½¿ç”¨å®Œå…¨ç›¸åŒçš„ä»£ç ä»“åº“éƒ¨ç½²åˆ°ä¸¤ä¸ªå¹³å°ï¼Œæ— éœ€ä»»ä½•ä¿®æ”¹ï¼**

åªéœ€è¦ï¼š
1. å°†ä»£ç åŒæ­¥åˆ° Gitee
2. åœ¨ EdgeOne æ§åˆ¶å°é…ç½®æ„å»ºè®¾ç½®
3. é…ç½®ç¯å¢ƒå˜é‡

å°±è¿™ä¹ˆç®€å•ï¼ğŸ‰

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**æœ€åæ›´æ–°**: 2024-01-XX  
**ç»´æŠ¤è€…**: [é¡¹ç›®ç»´æŠ¤è€…]
