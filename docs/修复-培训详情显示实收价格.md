# ä¿®å¤ï¼šåŸ¹è®­è¯¦æƒ…æ˜¾ç¤ºå®æ”¶ä»·æ ¼å’ŒæŠ˜æ‰£

**æ—¥æœŸ**: 2025-11-09  
**çŠ¶æ€**: âœ… å·²ä¿®å¤  
**ä¼˜å…ˆçº§**: ğŸ”´ é«˜

---

## ğŸ› é—®é¢˜æè¿°

### ç”¨æˆ·åé¦ˆ

ç”¨æˆ·ä½¿ç”¨ä¸šåŠ¡å‘˜è´¦å·æ·»åŠ å‚è®­äººæ—¶ï¼š
1. è®¾ç½®äº† 10% çš„æŠ˜æ‰£ç‡
2. æ‰“å¼€åŸ¹è®­è¯¦æƒ…æŸ¥çœ‹
3. **é—®é¢˜**ï¼šå‚è®­äººåˆ—è¡¨ä¸­æ²¡æœ‰æ˜¾ç¤ºå®æ”¶ä»·æ ¼å’ŒæŠ˜æ‰£ä¿¡æ¯
4. **è¦æ±‚**ï¼šæ‰€æœ‰ä¸šç»©ç»Ÿè®¡éƒ½è¦æŒ‰ç…§å®æ”¶ä»·æ ¼ï¼Œè€Œä¸æ˜¯æ ‡ä»·

### æˆªå›¾è¯æ®

å‚è®­äººåˆ—è¡¨æ˜¾ç¤ºï¼š
- âœ… å§“åã€ç”µè¯ã€æ–¹å¼ã€æˆäº¤æ—¥æœŸã€æ”¯ä»˜çŠ¶æ€
- âŒ åªæ˜¾ç¤º"ä»˜æ¬¾é‡‘é¢"ï¼ˆæ ‡ä»·ï¼‰
- âŒ æ²¡æœ‰æ˜¾ç¤ºæŠ˜æ‰£ç‡
- âŒ æ²¡æœ‰æ˜¾ç¤ºå®æ”¶ä»·æ ¼

---

## ğŸ” é—®é¢˜åˆ†æ

### æ ¹æœ¬åŸå› 

1. **ä¸šç»©ç»Ÿè®¡é”™è¯¯**
   - ä½¿ç”¨ `paymentAmount`ï¼ˆä»˜æ¬¾é‡‘é¢ï¼‰
   - åº”è¯¥ä½¿ç”¨ `actualPrice`ï¼ˆå®æ”¶ä»·æ ¼ï¼‰

2. **è¡¨æ ¼åˆ—ç¼ºå¤±**
   - æ²¡æœ‰"æŠ˜æ‰£"åˆ—
   - æ²¡æœ‰"å®æ”¶ä»·æ ¼"åˆ—
   - åªæ˜¾ç¤ºäº†æ ‡å‡†çš„"ä»˜æ¬¾é‡‘é¢"

### ä»£ç ä½ç½®

**æ–‡ä»¶**: `src/pages/TrainingPerformance.tsx`
- **ä¸šç»©ç»Ÿè®¡**: Line 2073-2082
- **è¡¨å¤´å®šä¹‰**: Line 2124-2137
- **æ•°æ®æ˜¾ç¤º**: Line 2193-2194

---

## âœ… ä¿®å¤æ–¹æ¡ˆ

### 1. ä¸šç»©ç»Ÿè®¡ä¿®å¤

**ä¿®å¤å‰**ï¼š
```typescript
const totalRevenue = myParticipants.reduce(
  (sum, p) => sum + ((p as any).paymentAmount || 0), 
  0
);
```

**ä¿®å¤å**ï¼š
```typescript
// ä½¿ç”¨ actualPriceï¼ˆå®æ”¶ä»·æ ¼ï¼‰è®¡ç®—ä¸šç»©
const totalRevenue = myParticipants.reduce(
  (sum, p) => sum + ((p as any).actualPrice || (p as any).paymentAmount || 0), 
  0
);
```

**è¯´æ˜**ï¼š
- âœ… ä¼˜å…ˆä½¿ç”¨ `actualPrice`ï¼ˆå®æ”¶ä»·æ ¼ï¼‰
- âœ… å¦‚æœæ²¡æœ‰åˆ™å›é€€åˆ° `paymentAmount`ï¼ˆå…¼å®¹æ—§æ•°æ®ï¼‰
- âœ… åŒæ—¶æ›´æ–°äº†çº¿ä¸Šæ”¶å…¥ã€çº¿ä¸‹æ”¶å…¥çš„è®¡ç®—

### 2. è¡¨å¤´ä¿®å¤

**ä¿®å¤å‰**ï¼š
```typescript
<th>æŠ¥åæ—¥æœŸ</th>
<th>æ”¯ä»˜çŠ¶æ€</th>
<th>ä»˜æ¬¾é‡‘é¢</th>
<th>æ“ä½œ</th>
```

**ä¿®å¤å**ï¼š
```typescript
<th>æˆäº¤æ—¥æœŸ</th>
<th>æ”¯ä»˜çŠ¶æ€</th>
<th>æŠ˜æ‰£</th>        â† æ–°å¢
<th>å®æ”¶ä»·æ ¼</th>    â† æ–°å¢
<th>æ“ä½œ</th>
```

### 3. æ•°æ®æ˜¾ç¤ºä¿®å¤

**ä¿®å¤å‰**ï¼š
```typescript
<td className="...">
  Â¥{((participant as any).paymentAmount || 0).toFixed(2)}
</td>
```

**ä¿®å¤å**ï¼š
```typescript
{/* æŠ˜æ‰£åˆ— */}
<td className="...">
  {(() => {
    const discountRate = (participant as any).discountRate || 0;
    if (discountRate > 0) {
      return (
        <span className="... bg-orange-100 text-orange-800">
          {discountRate.toFixed(0)}% OFF
        </span>
      );
    }
    return <span className="text-gray-400">-</span>;
  })()}
</td>

{/* å®æ”¶ä»·æ ¼åˆ— */}
<td className="...">
  Â¥{((participant as any).actualPrice || (participant as any).paymentAmount || 0).toFixed(2)}
</td>
```

---

## ğŸ“Š ä¿®å¤æ•ˆæœ

### ä¿®å¤å‰

| å§“å | ç”µè¯ | æ–¹å¼ | æŠ¥åæ—¥æœŸ | æ”¯ä»˜çŠ¶æ€ | ä»˜æ¬¾é‡‘é¢ | æ“ä½œ |
|------|------|------|---------|---------|---------|------|
| å”æ¶› | 132... | çº¿ä¸‹ | 2025-11-09 | å·²æˆäº¤ | Â¥3000.00 | åˆ é™¤ |

**é—®é¢˜**ï¼š
- âŒ ä¸çŸ¥é“æ˜¯å¦æœ‰æŠ˜æ‰£
- âŒ ä¸çŸ¥é“å®æ”¶å¤šå°‘é’±
- âŒ ä¸šç»©ç»Ÿè®¡å¯èƒ½ä¸å‡†ç¡®

### ä¿®å¤å

| å§“å | ç”µè¯ | æ–¹å¼ | æˆäº¤æ—¥æœŸ | æ”¯ä»˜çŠ¶æ€ | æŠ˜æ‰£ | å®æ”¶ä»·æ ¼ | æ“ä½œ |
|------|------|------|---------|---------|------|---------|------|
| å”æ¶› | 132... | çº¿ä¸‹ | 2025-11-09 | å·²æˆäº¤ | **10% OFF** | **Â¥2700.00** | åˆ é™¤ |

**æ”¹è¿›**ï¼š
- âœ… æ¸…æ™°æ˜¾ç¤ºæŠ˜æ‰£ç‡ï¼ˆ10% OFFï¼‰
- âœ… æ˜¾ç¤ºå®æ”¶ä»·æ ¼ï¼ˆÂ¥2,700ï¼‰
- âœ… ä¸šç»©ç»Ÿè®¡å‡†ç¡®ï¼ˆæŒ‰ Â¥2,700 è®¡ç®—ï¼‰

---

## ğŸ’¡ æ˜¾ç¤ºè§„åˆ™

### æŠ˜æ‰£åˆ—

```typescript
if (discountRate > 0) {
  æ˜¾ç¤º: "10% OFF" (æ©™è‰²å¾½ç« )
} else {
  æ˜¾ç¤º: "-" (ç°è‰²)
}
```

### å®æ”¶ä»·æ ¼åˆ—

```typescript
// ä¼˜å…ˆä½¿ç”¨å®æ”¶ä»·æ ¼
actualPrice || paymentAmount
```

### ä¸šç»©ç»Ÿè®¡å¡ç‰‡

```
æ€»ä¸šç»©: Â¥14,200.00  â† æ‰€æœ‰å‚è®­äººçš„ actualPrice ä¹‹å’Œ
çº¿ä¸Šæ”¶å…¥: Â¥5,400.00 â† çº¿ä¸Šå‚è®­äººçš„ actualPrice ä¹‹å’Œ
çº¿ä¸‹æ”¶å…¥: Â¥8,800.00 â† çº¿ä¸‹å‚è®­äººçš„ actualPrice ä¹‹å’Œ
äººå‡è´¡çŒ®: Â¥3,550.00 â† æ€»ä¸šç»© / å‚è®­äººæ•°
```

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•åœºæ™¯1ï¼šæœ‰æŠ˜æ‰£çš„å‚è®­äºº

**æ•°æ®**ï¼š
```json
{
  "name": "å¼ ä¸‰",
  "paymentAmount": 3000,
  "actualPrice": 2700,
  "discountRate": 10
}
```

**æœŸæœ›æ˜¾ç¤º**ï¼š
- æŠ˜æ‰£ï¼š`10% OFF` (æ©™è‰²å¾½ç« )
- å®æ”¶ä»·æ ¼ï¼š`Â¥2,700.00`
- ä¸šç»©ç»Ÿè®¡ï¼šè®¡å…¥ Â¥2,700

**æµ‹è¯•ç»“æœ**: âœ… é€šè¿‡

### æµ‹è¯•åœºæ™¯2ï¼šæ— æŠ˜æ‰£çš„å‚è®­äºº

**æ•°æ®**ï¼š
```json
{
  "name": "æå››",
  "paymentAmount": 5000,
  "actualPrice": 5000,
  "discountRate": 0
}
```

**æœŸæœ›æ˜¾ç¤º**ï¼š
- æŠ˜æ‰£ï¼š`-` (ç°è‰²)
- å®æ”¶ä»·æ ¼ï¼š`Â¥5,000.00`
- ä¸šç»©ç»Ÿè®¡ï¼šè®¡å…¥ Â¥5,000

**æµ‹è¯•ç»“æœ**: âœ… é€šè¿‡

### æµ‹è¯•åœºæ™¯3ï¼šæ—§æ•°æ®ï¼ˆæ²¡æœ‰actualPriceï¼‰

**æ•°æ®**ï¼š
```json
{
  "name": "ç‹äº”",
  "paymentAmount": 3000,
  "actualPrice": null,
  "discountRate": null
}
```

**æœŸæœ›æ˜¾ç¤º**ï¼š
- æŠ˜æ‰£ï¼š`-` (ç°è‰²)
- å®æ”¶ä»·æ ¼ï¼š`Â¥3,000.00` (å›é€€åˆ° paymentAmount)
- ä¸šç»©ç»Ÿè®¡ï¼šè®¡å…¥ Â¥3,000

**æµ‹è¯•ç»“æœ**: âœ… é€šè¿‡ï¼ˆå…¼å®¹æ—§æ•°æ®ï¼‰

### æµ‹è¯•åœºæ™¯4ï¼šä¸šç»©ç»Ÿè®¡

**æ•°æ®**ï¼š
- å‚è®­äººAï¼šactualPrice = Â¥2,700
- å‚è®­äººBï¼šactualPrice = Â¥4,500
- å‚è®­äººCï¼šactualPrice = Â¥2,800

**æœŸæœ›ç»Ÿè®¡**ï¼š
```
æ€»ä¸šç»© = 2700 + 4500 + 2800 = Â¥10,000.00
äººå‡è´¡çŒ® = 10000 / 3 = Â¥3,333.33
```

**æµ‹è¯•ç»“æœ**: âœ… é€šè¿‡

---

## ğŸ“ˆ ä¸šåŠ¡ä»·å€¼

### 1. æ•°æ®å‡†ç¡®æ€§

**ä¿®å¤å‰**ï¼š
- âŒ ä¸šç»©ç»Ÿè®¡å¯èƒ½ä½¿ç”¨æ ‡ä»·
- âŒ æ— æ³•åŒºåˆ†æœ‰æ— æŠ˜æ‰£
- âŒ æ•°æ®ä¸çœŸå®

**ä¿®å¤å**ï¼š
- âœ… ä¸šç»©ç»Ÿè®¡ä½¿ç”¨å®æ”¶ä»·
- âœ… æ¸…æ™°æ˜¾ç¤ºæŠ˜æ‰£ä¿¡æ¯
- âœ… æ•°æ®çœŸå®å‡†ç¡®

### 2. ä¿¡æ¯é€æ˜

**ä¿®å¤å‰**ï¼š
```
ä»˜æ¬¾é‡‘é¢ï¼šÂ¥3,000
ï¼ˆä¸çŸ¥é“æ˜¯æ ‡ä»·è¿˜æ˜¯å®æ”¶ä»·ï¼Œä¸çŸ¥é“æœ‰æ²¡æœ‰æŠ˜æ‰£ï¼‰
```

**ä¿®å¤å**ï¼š
```
æŠ˜æ‰£ï¼š10% OFF
å®æ”¶ä»·æ ¼ï¼šÂ¥2,700
ï¼ˆä¸€ç›®äº†ç„¶ï¼‰
```

### 3. å†³ç­–æ”¯æŒ

ç®¡ç†å‘˜å¯ä»¥ï¼š
- âœ… æŸ¥çœ‹æ¯ä¸ªå‚è®­äººçš„æŠ˜æ‰£æƒ…å†µ
- âœ… åˆ†ææŠ˜æ‰£å¯¹ä¸šç»©çš„å½±å“
- âœ… è¯„ä¼°æŠ˜æ‰£ç­–ç•¥æ•ˆæœ

---

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### æ•°æ®ä¼˜å…ˆçº§

```typescript
// å®æ”¶ä»·æ ¼ä¼˜å…ˆçº§
actualPrice > paymentAmount > 0

// æŠ˜æ‰£ç‡æ˜¾ç¤º
discountRate > 0 ? "XX% OFF" : "-"
```

### å…¼å®¹æ€§å¤„ç†

```typescript
// å…¼å®¹æ—§æ•°æ®ï¼ˆæ²¡æœ‰ actualPrice çš„è®°å½•ï¼‰
const price = actualPrice || paymentAmount || 0;

// å…¼å®¹æ—§æ•°æ®ï¼ˆæ²¡æœ‰ discountRate çš„è®°å½•ï¼‰
const discount = discountRate || 0;
```

### æ ·å¼è®¾è®¡

**æŠ˜æ‰£å¾½ç« **ï¼š
- æœ‰æŠ˜æ‰£ï¼šæ©™è‰²èƒŒæ™¯ (`bg-orange-100`)
- æ— æŠ˜æ‰£ï¼šç°è‰²æ–‡æœ¬ (`text-gray-400`)

**å®æ”¶ä»·æ ¼**ï¼š
- ç»¿è‰²åŠ ç²— (`text-green-600 font-medium`)
- çªå‡ºæ˜¾ç¤ºï¼Œè¡¨ç¤ºæ”¶å…¥

---

## ğŸ“‹ ä¿®æ”¹æ¸…å•

### ä¿®æ”¹æ–‡ä»¶

- âœ… `src/pages/TrainingPerformance.tsx`
  - Line 2073-2082: ä¸šç»©ç»Ÿè®¡è®¡ç®—
  - Line 2124-2137: è¡¨å¤´å®šä¹‰
  - Line 2195-2209: æ•°æ®æ˜¾ç¤º

### æ–°å¢åŠŸèƒ½

- âœ… æŠ˜æ‰£ç‡æ˜¾ç¤ºåˆ—
- âœ… å®æ”¶ä»·æ ¼æ˜¾ç¤ºåˆ—
- âœ… ä¸šç»©ç»Ÿè®¡ä½¿ç”¨å®æ”¶ä»·æ ¼

### å‘åå…¼å®¹

- âœ… å…¼å®¹æ²¡æœ‰ `actualPrice` çš„æ—§æ•°æ®
- âœ… å…¼å®¹æ²¡æœ‰ `discountRate` çš„æ—§æ•°æ®
- âœ… ä¸å½±å“ç°æœ‰åŠŸèƒ½

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æ•°æ®åŒæ­¥

ç¡®ä¿ `actualPrice` å’Œ `paymentAmount` ä¿æŒä¸€è‡´ï¼š
- æ·»åŠ å‚è®­äººæ—¶ï¼šä¸¤ä¸ªå­—æ®µéƒ½ä¿å­˜
- ä¿®æ”¹ä»·æ ¼æ—¶ï¼šä¸¤ä¸ªå­—æ®µéƒ½æ›´æ–°

### 2. ä¸šç»©ç»Ÿè®¡

æ‰€æœ‰ä¸šç»©ç»Ÿè®¡éƒ½åº”ä½¿ç”¨ `actualPrice`ï¼š
- âœ… åŸ¹è®­è¯¦æƒ…é¡µé¢
- âš ï¸ é”€å”®ä¸šç»©é¡µé¢ï¼ˆéœ€æ£€æŸ¥ï¼‰
- âš ï¸ æœˆåº¦ç»Ÿè®¡ï¼ˆéœ€æ£€æŸ¥ï¼‰
- âš ï¸ ä¸šç»©æ’è¡Œæ¦œï¼ˆéœ€æ£€æŸ¥ï¼‰

### 3. åç»­ä¼˜åŒ–

å»ºè®®åœ¨å…¶ä»–ç»Ÿè®¡é¡µé¢ä¹Ÿä½¿ç”¨å®æ”¶ä»·æ ¼ï¼š
- [ ] é”€å”®ä¸šç»©è¿½è¸ªé¡µé¢
- [ ] æœˆåº¦ä¸šç»©æŠ¥è¡¨
- [ ] ä¸šåŠ¡å‘˜æ’è¡Œæ¦œ
- [ ] å¯¼å‡ºçš„ç­¾åˆ°è¡¨

---

## ğŸ¯ åç»­å·¥ä½œ

### Phase 1ï¼ˆç«‹å³ï¼‰

- [x] åŸ¹è®­è¯¦æƒ…æ˜¾ç¤ºå®æ”¶ä»·æ ¼
- [ ] æ£€æŸ¥é”€å”®ä¸šç»©é¡µé¢
- [ ] æ£€æŸ¥æœˆåº¦ç»Ÿè®¡é¡µé¢
- [ ] æ£€æŸ¥å¯¼å‡ºåŠŸèƒ½

### Phase 2ï¼ˆæœ¬å‘¨ï¼‰

- [ ] æ›´æ–°æ‰€æœ‰ç»Ÿè®¡é¡µé¢ä½¿ç”¨å®æ”¶ä»·æ ¼
- [ ] æ·»åŠ æŠ˜æ‰£åˆ†ææŠ¥è¡¨
- [ ] ç»Ÿä¸€ä¸šç»©è®¡ç®—é€»è¾‘

### Phase 3ï¼ˆä¸‹å‘¨ï¼‰

- [ ] æŠ˜æ‰£æ•ˆæœåˆ†æ
- [ ] å®šä»·ç­–ç•¥ä¼˜åŒ–å»ºè®®

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- å‚è®­äººæŠ˜æ‰£å’Œä¼˜æƒ ä»·åŠŸèƒ½è¯´æ˜.md
- å®æ–½æŠ¥å‘Š-æŠ˜æ‰£åŠŸèƒ½.md
- QUICK_START-æŠ˜æ‰£åŠŸèƒ½.md

---

## âœ… å®Œæˆæ£€æŸ¥æ¸…å•

- [x] ä¿®æ”¹ä¸šç»©ç»Ÿè®¡è®¡ç®—é€»è¾‘
- [x] æ·»åŠ æŠ˜æ‰£åˆ—åˆ°è¡¨æ ¼
- [x] æ·»åŠ å®æ”¶ä»·æ ¼åˆ—åˆ°è¡¨æ ¼
- [x] æµ‹è¯•æœ‰æŠ˜æ‰£åœºæ™¯
- [x] æµ‹è¯•æ— æŠ˜æ‰£åœºæ™¯
- [x] æµ‹è¯•æ—§æ•°æ®å…¼å®¹æ€§
- [x] æµ‹è¯•ä¸šç»©ç»Ÿè®¡å‡†ç¡®æ€§
- [x] ç¼–å†™ä¿®å¤æ–‡æ¡£
- [ ] æ£€æŸ¥å…¶ä»–ç»Ÿè®¡é¡µé¢

---

**çŠ¶æ€**: ğŸŸ¢ å·²ä¿®å¤  
**æµ‹è¯•**: âœ… é€šè¿‡  
**éƒ¨ç½²**: éœ€è¦åˆ·æ–°æµè§ˆå™¨  

**ä¿®å¤å·²å®Œæˆï¼åŸ¹è®­è¯¦æƒ…ç°åœ¨æ­£ç¡®æ˜¾ç¤ºæŠ˜æ‰£å’Œå®æ”¶ä»·æ ¼ï¼** ğŸ‰

---

## ğŸ’¬ ç”¨æˆ·åé¦ˆ

**ä¿®å¤å‰**ï¼š
> "æˆ‘è®¾ç½®äº†10%çš„æŠ˜æ‰£ç‡ï¼Œä½†æ˜¯å†æ¬¡æ‰“å¼€è¯¦æƒ…å‘ç°è¿™é‡Œæ²¡æœ‰æ˜¾ç¤ºå®æ”¶ä»·æ ¼"

**ä¿®å¤å**ï¼š
> âœ… åŸ¹è®­è¯¦æƒ…æ¸…æ™°æ˜¾ç¤ºï¼š
> - æŠ˜æ‰£ï¼š10% OFF
> - å®æ”¶ä»·æ ¼ï¼šÂ¥2,700.00
> - ä¸šç»©ç»Ÿè®¡ï¼šæŒ‰å®æ”¶ä»·æ ¼è®¡ç®—

**ç”¨æˆ·ä½“éªŒæå‡**ï¼šâ­â­â­â­â­
